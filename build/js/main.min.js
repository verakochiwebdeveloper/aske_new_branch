"use strict";

var nowTime = new Date(),
  date = nowTime.getDate(),
  month = nowTime.getMonth(),
  monthLast = nowTime.getMonth() - 1 == -1 ? 11 : nowTime.getMonth() - 1,
  monthNext = nowTime.getMonth() + 1 == 12 ? 0 : nowTime.getMonth() + 1,
  year = nowTime.getFullYear(),
  daysInMonth = new Date(year, month + 1, 0).getDate(),
  daysInMonthLast = new Date(year, month, 0).getDate(),
  daysInMonthBeforeLast = new Date(year, month, 0).getDate(),
  daysInMonthNext = new Date(year, month + 2, 0).getDate(),
  daysWeek0 = new Date("".concat(year, "-").concat(month + 1, "-1")).getDay(),
  daysWeek1 = new Date("".concat(year, "-").concat(month + 2, "-1")).getDay(),
  daysWeek2 = new Date("".concat(year, "-").concat(month, "-1")).getDay(),
  daysWeekCurrent = 0 == daysWeek0 ? 7 : daysWeek0,
  daysWeekNext = 0 == daysWeek1 ? 7 : daysWeek1,
  daysWeekLast = 0 == daysWeek2 ? 7 : daysWeek2,
  tableDate = document.querySelectorAll(".calendar_day"),
  calendar = document.querySelector(".calendar_days"),
  calendarMonth = document.querySelector(".calendar_month"),
  strelkaLast = document.querySelectorAll(".calendar_strelka")[0],
  strelkaNext = document.querySelectorAll(".calendar_strelka")[1],
  dataTitle = document.querySelector(".invent_title"),
  inventListBlock = document.querySelector(".calendar_invent"),
  closeInvent = document.querySelector(".calendar_close"),
  inventNone = document.querySelector(".inventlist-none"),
  inventCompleted = document.querySelector(".inventlist-comleted"),
  inventlistFull = document.querySelector(".inventlist-full"),
  nameMonth = {
    0: "Января",
    1: "Февраля",
    2: "Марта",
    3: "Апреля",
    4: "Мая",
    5: "Июня",
    6: "Июля",
    7: "Августа",
    8: "Сентября",
    9: "Октября",
    10: "Ноября",
    11: "Декабаря"
  },
  nameMonthTitle = {
    0: "Январь",
    1: "Февраль",
    2: "Март",
    3: "Апрель",
    4: "Май",
    5: "Июнь",
    6: "Июль",
    7: "Август",
    8: "Сентябрь",
    9: "Октябрь",
    10: "Ноябрь",
    11: "Декабарь"
  },
  nameMonthNumer = {
    0: "01",
    1: "02",
    2: "03",
    3: "04",
    4: "05",
    5: "06",
    6: "07",
    7: "08",
    8: "09",
    9: "10",
    10: "11",
    11: "12"
  },
  objInvent = {
    17.01: [["артем", "нарвская", "17:45"], ["артем", "нарвская", "18:45"]],
    29.01: [["никита", "нарвская", "17:45"], ["андрей", "нарвская", "18:45"]],
    "05.02": [["артем", "нарвская", "17:45"]],
    "06.02": [["артем", "нарвская", "17:45"]],
    "09.02": [["артем", "нарвская", "18:45"], ["артем", "нарвская", "17:45"], ["артем", "нарвская", "19:45"]],
    17.02: [["артем", "автово", "17:45"], ["артем", "автово", "18:45"]],
    "08.03": [["артем", "автово", "18:45"]],
    25.03: [["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"]]
  };
var monthCount = 0;
var calendarFunc = function calendarFunc() {
  function e(e, t, n, o) {
    var a = 1,
      d = t + 2 - o,
      l = 1;
    for (var _t = 1; _t <= e.length; _t++) {
      var _s = e[_t - 1];
      _t >= o && n >= a ? _s.textContent = a++ : _t < o ? (_s.textContent = d++, _s.classList.add("othermonth")) : (_s.textContent = l++, _s.classList.add("othermonth"));
    }
  }
  function t(e) {
    calendarMonth.textContent = nameMonthTitle[e];
  }
  function n(e) {
    for (var _t2 = 0; _t2 < e.length; _t2++) {
      var _n = e[_t2];
      _n.textContent = "", _n.classList.remove("othermonth"), _n.classList.remove("border_date");
    }
    o(tableDate);
  }
  function o(e) {
    for (var _t3 = 0; _t3 < e.length; _t3++) {
      e[_t3].classList.remove("background_date");
    }
  }
  function a(e) {
    for (var _t4 = 0; _t4 < e.length; _t4++) {
      var _n2 = e[_t4];
      _n2.textContent != date || _n2.classList.contains("othermonth") || _n2.classList.add("calendar_current-day");
    }
  }
  function d(e) {
    for (var _t5 = 0; _t5 < e.length; _t5++) {
      e[_t5].classList.remove("calendar_current-day");
    }
  }
  function l(e, t) {
    inventNone.classList.remove("display_block"), inventCompleted.classList.remove("display_block"), inventlistFull.classList.remove("display_block"), e < 10 && (e = "0" + e);
    var n = objInvent[e + "." + t];
    void 0 === n ? inventNone.classList.add("display_block") : Number(e) < date && Number(t) == month + 1 || Number(t) < month + 1 ? inventCompleted.classList.add("display_block") : function (e) {
      inventlistFull.innerHTML = "", inventlistFull.classList.add("display_block");
      for (var _t6 = 0; _t6 < e.length; _t6++) {
        var _n3 = e[_t6],
          _o = document.createElement("div"),
          _a = document.createElement("p"),
          _d = document.createElement("p"),
          _l = document.createElement("p");
        _a.textContent = _n3[0], _d.textContent = _n3[1], _l.textContent = _n3[2], _o.classList.add("inventlist-full-div"), _a.classList.add("inventlist-full-text"), _d.classList.add("inventlist-full-text"), _l.classList.add("inventlist-full-text"), inventlistFull.appendChild(_o), _o.appendChild(_l), _o.appendChild(_d), _o.appendChild(_a);
      }
    }(n);
  }
  function s() {
    borderMonth = nameMonthNumer[month + monthCount];
    for (var _e = 0; _e < tableDate.length; _e++) {
      var _t7 = tableDate[_e];
      var _n4 = void 0;
      _t7.classList.contains("othermonth") || (_n4 = Number(_t7.textContent) < 10 ? "0" + _t7.textContent + "." + borderMonth : _t7.textContent + "." + borderMonth, void 0 !== objInvent[_n4] && _t7.classList.add("border_date"));
    }
  }
  t(month), e(tableDate, daysInMonthLast, daysInMonth, daysWeekCurrent), a(tableDate), strelkaLast.addEventListener("click", function () {
    n(tableDate), strelkaNext.classList.contains("display_none") ? (e(tableDate, daysInMonthLast, daysInMonth, daysWeekCurrent), strelkaNext.classList.remove("display_none"), t(month), a(tableDate), monthCount--, s()) : (e(tableDate, daysInMonthBeforeLast, daysInMonthLast, daysWeekLast), strelkaLast.classList.add("display_none"), t(monthLast), d(tableDate), monthCount--, s());
  }), strelkaNext.addEventListener("click", function () {
    n(tableDate), strelkaLast.classList.contains("display_none") ? (e(tableDate, daysInMonthLast, daysInMonth, daysWeekCurrent), strelkaLast.classList.remove("display_none"), t(month), a(tableDate), monthCount++, s()) : (e(tableDate, daysInMonth, daysInMonthNext, daysWeekNext), strelkaNext.classList.add("display_none"), t(monthNext), d(tableDate), monthCount++, s());
  }), calendar.addEventListener("mousedown", function (e) {
    var t = e.target.textContent;
    window.innerWidth < 744 && inventListBlock.classList.add("display_block"), !e.target.classList.contains("othermonth") && e.target.classList.contains("calendar_day") && (o(tableDate), dataTitle.textContent = "".concat(t, " ").concat(nameMonth[month + monthCount]), e.target.classList.add("background_date"), l(t, nameMonthNumer[month + monthCount]));
  }), closeInvent.addEventListener("click", function () {
    inventListBlock.classList.remove("display_block");
  }), dataTitle.textContent = "".concat(date, " ").concat(nameMonth[month]), l(String(date), nameMonthNumer[month]), s();
};
null != dataTitle && calendarFunc();
var buttonMenu = document.querySelector(".mini-header_burger"),
  headerlist = document.querySelector(".mini-header_list"),
  burgerImg = document.querySelectorAll(".mini-header_burger-img"),
  burgerImgChange = function burgerImgChange() {
    headerlist.classList.toggle("burger-visible"), burgerImg[0].classList.toggle("burger-active"), burgerImg[1].classList.toggle("burger-active");
  };
null != buttonMenu && buttonMenu.addEventListener("click", burgerImgChange);
var menuBtn = document.querySelector(".menu__burger"),
  menu = document.querySelector(".menu__list");
null != menuBtn && menuBtn.addEventListener("click", function () {
  menuBtn.classList.toggle("active"), menu.classList.toggle("active");
});
var info = document.querySelector(".info"),
  personal = document.querySelector(".personal-info"),
  office = function office() {
    document.getElementById("open-modal-btn").addEventListener("click", function () {
      document.getElementById("my-modal").classList.add("open");
    }), document.getElementById("close-my-modal-btn").addEventListener("click", function () {
      document.getElementById("my-modal").classList.remove("open");
    }), window.addEventListener("keydown", function (e) {
      "Escape" === e.key && document.getElementById("my-modal").classList.remove("open");
    }), document.querySelector("#my-modal .modal__box").addEventListener("click", function (e) {
      e._isClickWithModal = !0;
    }), document.getElementById("my-modal").addEventListener("click", function (e) {
      e._isClickWithModal || e.currentTarget.classList.remove("open");
    }), document.getElementById("open-modal-btn-social-networks").addEventListener("click", function () {
      document.getElementById("my-modal-social-networks").classList.add("open");
    }), document.getElementById("close-my-modal-btn-social-networks").addEventListener("click", function () {
      document.getElementById("my-modal-social-networks").classList.remove("open");
    }), window.addEventListener("keydown", function (e) {
      "Escape" === e.key && document.getElementById("my-modal-social-networks").classList.remove("open");
    }), document.querySelector("#my-modal-social-networks .modal__box-social-networks").addEventListener("click", function (e) {
      e._isClickWithModal = !0;
    }), document.getElementById("my-modal-social-networks").addEventListener("click", function (e) {
      e._isClickWithModal || e.currentTarget.classList.remove("open");
    }), document.getElementById("open-modal-btn-add-performances").addEventListener("click", function () {
      document.getElementById("my-modal-add-performances").classList.add("open");
    }), document.getElementById("close-my-modal-btn-add-performances").addEventListener("click", function () {
      document.getElementById("my-modal-add-performances").classList.remove("open");
    }), window.addEventListener("click", function (e) {
      "modal__box-more-performances" !== e.target.className && e.target.classList.remove("open");
    }), document.querySelector("#my-modal-add-performances .modal__box-add-performances").addEventListener("click", function (e) {
      e._isClickWithModal = !0;
    }), document.getElementById("my-modal-add-performances").addEventListener("click", function (e) {
      e._isClickWithModal || e.currentTarget.classList.remove("open");
    }), document.getElementById("open-modal-btn-more-performances").addEventListener("click", function () {
      document.getElementById("my-modal-more-performances").classList.add("open");
    }), document.getElementById("close-my-modal-btn-more-performances").addEventListener("click", function () {
      document.getElementById("my-modal-more-performances").classList.remove("open");
    }), window.addEventListener("keydown", function (e) {
      "Escape" === e.key && document.getElementById("my-modal-more-performances").classList.remove("open");
    }), document.querySelector("#my-modal-more-performances .modal__box-more-performances").addEventListener("click", function (e) {
      e._isClickWithModal = !0;
    }), document.getElementById("my-modal-more-performances").addEventListener("click", function (e) {
      e._isClickWithModal || e.currentTarget.classList.remove("open");
    }), document.getElementById("open-modal-btn-download-photos").addEventListener("click", function () {
      document.getElementById("my-modal-download-photos").classList.add("open");
    }), document.getElementById("close-my-modal-btn-download-photos").addEventListener("click", function () {
      document.getElementById("my-modal-download-photos").classList.remove("open");
    }), window.addEventListener("keydown", function (e) {
      "Escape" === e.key && document.getElementById("my-modal-download-photos").classList.remove("open");
    }), document.querySelector("#my-modal-download-photos .modal__box-download-photos").addEventListener("click", function (e) {
      e._isClickWithModal = !0;
    }), document.getElementById("my-modal-download-photos").addEventListener("click", function (e) {
      e._isClickWithModal || e.currentTarget.classList.remove("open");
    });
  },
  monthCheck = function monthCheck() {
    var e = document.getElementById("dateInput"),
      t = new Date(),
      n = new Date(t.getFullYear(), t.getMonth(), 2),
      o = new Date(t.getFullYear(), t.getMonth() + 2, 1);
    e.min = n.toISOString().split("T")[0], e.max = o.toISOString().split("T")[0];
  };
null != info && (document.getElementById("open-modal-btn").addEventListener("click", function () {
  document.getElementById("my-modal").classList.add("open");
}), document.getElementById("close-my-modal-btn").addEventListener("click", function () {
  document.getElementById("my-modal").classList.remove("open");
}), window.addEventListener("keydown", function (e) {
  "Escape" === e.key && document.getElementById("my-modal").classList.remove("open");
}), document.querySelector("#my-modal .modal__box").addEventListener("click", function (e) {
  e._isClickWithModal = !0;
}), document.getElementById("my-modal").addEventListener("click", function (e) {
  e._isClickWithModal || e.currentTarget.classList.remove("open");
}), document.getElementById("open-modal-btn-social-networks").addEventListener("click", function () {
  document.getElementById("my-modal-social-networks").classList.add("open");
}), document.getElementById("close-my-modal-btn-social-networks").addEventListener("click", function () {
  document.getElementById("my-modal-social-networks").classList.remove("open");
}), window.addEventListener("keydown", function (e) {
  "Escape" === e.key && document.getElementById("my-modal-social-networks").classList.remove("open");
}), document.querySelector("#my-modal-social-networks .modal__box-social-networks").addEventListener("click", function (e) {
  e._isClickWithModal = !0;
}), document.getElementById("my-modal-social-networks").addEventListener("click", function (e) {
  e._isClickWithModal || e.currentTarget.classList.remove("open");
}), document.getElementById("open-modal-btn-add-performances").addEventListener("click", function () {
  document.getElementById("my-modal-add-performances").classList.add("open");
}), document.getElementById("close-my-modal-btn-add-performances").addEventListener("click", function () {
  document.getElementById("my-modal-add-performances").classList.remove("open");
}), window.addEventListener("click", function (e) {
  "modal__box-more-performances" !== e.target.className && e.target.classList.remove("open");
}), document.querySelector("#my-modal-add-performances .modal__box-add-performances").addEventListener("click", function (e) {
  e._isClickWithModal = !0;
}), document.getElementById("my-modal-add-performances").addEventListener("click", function (e) {
  e._isClickWithModal || e.currentTarget.classList.remove("open");
}), document.getElementById("open-modal-btn-more-performances").addEventListener("click", function () {
  document.getElementById("my-modal-more-performances").classList.add("open");
}), document.getElementById("close-my-modal-btn-more-performances").addEventListener("click", function () {
  document.getElementById("my-modal-more-performances").classList.remove("open");
}), window.addEventListener("keydown", function (e) {
  "Escape" === e.key && document.getElementById("my-modal-more-performances").classList.remove("open");
}), document.querySelector("#my-modal-more-performances .modal__box-more-performances").addEventListener("click", function (e) {
  e._isClickWithModal = !0;
}), document.getElementById("my-modal-more-performances").addEventListener("click", function (e) {
  e._isClickWithModal || e.currentTarget.classList.remove("open");
}), document.getElementById("open-modal-btn-download-photos").addEventListener("click", function () {
  document.getElementById("my-modal-download-photos").classList.add("open");
}), document.getElementById("close-my-modal-btn-download-photos").addEventListener("click", function () {
  document.getElementById("my-modal-download-photos").classList.remove("open");
}), window.addEventListener("keydown", function (e) {
  "Escape" === e.key && document.getElementById("my-modal-download-photos").classList.remove("open");
}), document.querySelector("#my-modal-download-photos .modal__box-download-photos").addEventListener("click", function (e) {
  e._isClickWithModal = !0;
}), document.getElementById("my-modal-download-photos").addEventListener("click", function (e) {
  e._isClickWithModal || e.currentTarget.classList.remove("open");
}), monthCheck()), popupImageOpen = function popupImageOpen() {
  var e = document.querySelector(".gallery__photos"),
    t = document.querySelector(".popup__gallery-items"),
    n = document.querySelector(".popup__gallery-relative"),
    o = function o() {
      n.innerHTML = "", t.classList.add("display_none");
    };
  e.addEventListener("mousedown", function (e) {
    var a = e.target,
      d = a.src;
    if (t.classList.remove("dispay_none"), "gallery__photos-img" == a.className) {
      var _e2 = document.createElement("img"),
        _a2 = document.createElement("button");
      _a2.type = "button", _e2.src = d, _e2.classList.add("popup__gallery-img"), _a2.classList.add("popup__gallery-close"), n.appendChild(_e2), n.appendChild(_a2), t.classList.remove("display_none"), _a2.addEventListener("click", o);
    }
  }), console.log(t);
}, personalInfo = function personalInfo() {
  document.querySelectorAll(".open-popup").forEach(function (e) {
    e.addEventListener("click", function () {
      var e = this.getAttribute("data-target");
      document.getElementById(e).classList.add("open");
    });
  }), document.querySelectorAll(".close-popup").forEach(function (e) {
    e.addEventListener("click", function () {
      this.closest(".modal-more-performances").classList.remove("open");
    });
  }), window.addEventListener("click", function (e) {
    "modal__box-more-performances" !== e.target.className && e.target.classList.remove("open");
  });
}, null != personal && (personalInfo(), popupImageOpen());