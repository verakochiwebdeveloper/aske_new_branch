"use strict";

var nowTime = new Date(),
  date = nowTime.getDate(),
  month = nowTime.getMonth(),
  monthLast = nowTime.getMonth() - 1 == -1 ? 11 : nowTime.getMonth() - 1,
  monthNext = nowTime.getMonth() + 1 == 12 ? 0 : nowTime.getMonth() + 1,
  year = nowTime.getFullYear(),
  daysInMonth = new Date(year, month + 1, 0).getDate(),
  daysInMonthLast = new Date(year, month, 0).getDate(),
  daysInMonthBeforeLast = new Date(year, month, 0).getDate(),
  daysInMonthNext = new Date(year, month + 2, 0).getDate(),
  daysWeek0 = new Date("".concat(year, "-").concat(month + 1, "-1")).getDay(),
  daysWeek1 = new Date("".concat(year, "-").concat(month + 2, "-1")).getDay(),
  daysWeek2 = new Date("".concat(year, "-").concat(month, "-1")).getDay(),
  daysWeekCurrent = 0 == daysWeek0 ? 7 : daysWeek0,
  daysWeekNext = 0 == daysWeek1 ? 7 : daysWeek1,
  daysWeekLast = 0 == daysWeek2 ? 7 : daysWeek2,
  tableDate = document.querySelectorAll(".calendar_day"),
  calendar = document.querySelector(".calendar_days"),
  calendarMonth = document.querySelector(".calendar_month"),
  strelkaLast = document.querySelectorAll(".calendar_strelka")[0],
  strelkaNext = document.querySelectorAll(".calendar_strelka")[1],
  dataTitle = document.querySelector(".invent_title"),
  inventListBlock = document.querySelector(".calendar_invent"),
  closeInvent = document.querySelector(".calendar_close"),
  inventNone = document.querySelector(".inventlist-none"),
  inventCompleted = document.querySelector(".inventlist-comleted"),
  inventlistFull = document.querySelector(".inventlist-full"),
  nameMonth = {
    0: "Января",
    1: "Февраля",
    2: "Марта",
    3: "Апреля",
    4: "Мая",
    5: "Июня",
    6: "Июля",
    7: "Августа",
    8: "Сентября",
    9: "Октября",
    10: "Ноября",
    11: "Декабаря"
  },
  nameMonthTitle = {
    0: "Январь",
    1: "Февраль",
    2: "Март",
    3: "Апрель",
    4: "Май",
    5: "Июнь",
    6: "Июль",
    7: "Август",
    8: "Сентябрь",
    9: "Октябрь",
    10: "Ноябрь",
    11: "Декабарь"
  },
  nameMonthNumer = {
    0: "01",
    1: "02",
    2: "03",
    3: "04",
    4: "05",
    5: "06",
    6: "07",
    7: "08",
    8: "09",
    9: "10",
    10: "11",
    11: "12"
  },
  objInvent = {
    17.01: [["артем", "нарвская", "17:45"], ["артем", "нарвская", "18:45"]],
    29.01: [["никита", "нарвская", "17:45"], ["андрей", "нарвская", "18:45"]],
    "05.02": [["артем", "нарвская", "17:45"]],
    "06.02": [["артем", "нарвская", "17:45"]],
    "09.02": [["артем", "нарвская", "18:45"], ["артем", "нарвская", "17:45"], ["артем", "нарвская", "19:45"]],
    17.02: [["артем", "автово", "17:45"], ["артем", "автово", "18:45"]],
    "08.03": [["артем", "автово", "18:45"]],
    25.03: [["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"], ["артем", "автово", "18:45"], ["артем", "ветеранов", "18:45"]]
  };
var monthCount = 0;
var calendarFunc = function calendarFunc() {
  function t(t, e, n, a) {
    var o = 1,
      s = e + 2 - a,
      l = 1;
    for (var _e = 1; _e <= t.length; _e++) {
      var _d = t[_e - 1];
      _e >= a && n >= o ? _d.textContent = o++ : _e < a ? (_d.textContent = s++, _d.classList.add("othermonth")) : (_d.textContent = l++, _d.classList.add("othermonth"));
    }
  }
  function e(t) {
    calendarMonth.textContent = nameMonthTitle[t];
  }
  function n(t) {
    for (var _e2 = 0; _e2 < t.length; _e2++) {
      var _n = t[_e2];
      _n.textContent = "", _n.classList.remove("othermonth"), _n.classList.remove("border_date");
    }
    a(tableDate);
  }
  function a(t) {
    for (var _e3 = 0; _e3 < t.length; _e3++) {
      t[_e3].classList.remove("background_date");
    }
  }
  function o(t) {
    for (var _e4 = 0; _e4 < t.length; _e4++) {
      var _n2 = t[_e4];
      _n2.textContent != date || _n2.classList.contains("othermonth") || _n2.classList.add("calendar_current-day");
    }
  }
  function s(t) {
    for (var _e5 = 0; _e5 < t.length; _e5++) {
      t[_e5].classList.remove("calendar_current-day");
    }
  }
  function l(t, e) {
    inventNone.classList.remove("display_block"), inventCompleted.classList.remove("display_block"), inventlistFull.classList.remove("display_block"), t < 10 && (t = "0" + t);
    var n = objInvent[t + "." + e];
    void 0 === n ? inventNone.classList.add("display_block") : Number(t) < date && Number(e) == month + 1 || Number(e) < month + 1 ? inventCompleted.classList.add("display_block") : function (t) {
      inventlistFull.innerHTML = "", inventlistFull.classList.add("display_block");
      for (var _e6 = 0; _e6 < t.length; _e6++) {
        var _n3 = t[_e6],
          _a = document.createElement("div"),
          _o = document.createElement("p"),
          _s = document.createElement("p"),
          _l = document.createElement("p");
        _o.textContent = _n3[0], _s.textContent = _n3[1], _l.textContent = _n3[2], _a.classList.add("inventlist-full-div"), _o.classList.add("inventlist-full-text"), _s.classList.add("inventlist-full-text"), _l.classList.add("inventlist-full-text"), inventlistFull.appendChild(_a), _a.appendChild(_l), _a.appendChild(_s), _a.appendChild(_o);
      }
    }(n);
  }
  function d() {
    borderMonth = nameMonthNumer[month + monthCount];
    for (var _t = 0; _t < tableDate.length; _t++) {
      var _e7 = tableDate[_t];
      var _n4 = void 0;
      _e7.classList.contains("othermonth") || (_n4 = Number(_e7.textContent) < 10 ? "0" + _e7.textContent + "." + borderMonth : _e7.textContent + "." + borderMonth, void 0 !== objInvent[_n4] && _e7.classList.add("border_date"));
    }
  }
  e(month), t(tableDate, daysInMonthLast, daysInMonth, daysWeekCurrent), o(tableDate), strelkaLast.addEventListener("click", function () {
    n(tableDate), strelkaNext.classList.contains("display_none") ? (t(tableDate, daysInMonthLast, daysInMonth, daysWeekCurrent), strelkaNext.classList.remove("display_none"), e(month), o(tableDate), monthCount--, d()) : (t(tableDate, daysInMonthBeforeLast, daysInMonthLast, daysWeekLast), strelkaLast.classList.add("display_none"), e(monthLast), s(tableDate), monthCount--, d());
  }), strelkaNext.addEventListener("click", function () {
    n(tableDate), strelkaLast.classList.contains("display_none") ? (t(tableDate, daysInMonthLast, daysInMonth, daysWeekCurrent), strelkaLast.classList.remove("display_none"), e(month), o(tableDate), monthCount++, d()) : (t(tableDate, daysInMonth, daysInMonthNext, daysWeekNext), strelkaNext.classList.add("display_none"), e(monthNext), s(tableDate), monthCount++, d());
  }), calendar.addEventListener("mousedown", function (t) {
    var e = t.target.textContent;
    window.innerWidth < 744 && inventListBlock.classList.add("display_block"), !t.target.classList.contains("othermonth") && t.target.classList.contains("calendar_day") && (a(tableDate), dataTitle.textContent = "".concat(e, " ").concat(nameMonth[month + monthCount]), t.target.classList.add("background_date"), l(e, nameMonthNumer[month + monthCount]));
  }), closeInvent.addEventListener("click", function () {
    inventListBlock.classList.remove("display_block");
  }), dataTitle.textContent = "".concat(date, " ").concat(nameMonth[month]), l(String(date), nameMonthNumer[month]), d();
};
null != dataTitle && calendarFunc();